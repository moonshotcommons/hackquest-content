# Content/æ¦‚å¿µ

### Concept

åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†å­¦ä¹ solidityå½“ä¸­çš„å“ˆå¸Œè®¡ç®—ã€‚

å“ˆå¸Œè®¡ç®—æ˜¯ä¸€ç§å°†ä»»æ„é•¿åº¦çš„æ•°æ®è½¬æ¢ä¸ºå›ºå®šé•¿åº¦å“ˆå¸Œå€¼çš„è¿‡ç¨‹ã€‚è€Œå“ˆå¸Œçš„ç‰¹ç‚¹æ˜¯â€”â€”ä¸åŒçš„å­—ç¬¦ä¸²å“ˆå¸Œå‡ºæ¥çš„ç»“æœå‡ ä¹ä¸å¯èƒ½ç›¸åŒã€‚

```solidity
"hello world!!!" -> ds1b
"hello world!" -> tgf4
```

<aside>
ğŸ’¡ è¿™åœ¨ç”Ÿæˆæ•°æ®å”¯ä¸€æ ‡è¯†ã€åŠ å¯†ç­¾åç­‰é¢†åŸŸæœ‰é‡å¤§æ„ä¹‰ã€‚

</aside>

- æ¯”å–»
    
    æˆ‘ä»¬å¯ä»¥å°†å“ˆå¸Œå‡½æ•°æ¯”å–»ä¸ºä¸€ä¸ªé­”æœ¯æœºå™¨ã€‚ä½ å°†ä»»æ„ç‰©ä½“æ”¾å…¥è¿™ä¸ªæœºå™¨ä¸­ï¼Œå®ƒä¼šå°†ç‰©ä½“è½¬åŒ–ä¸ºä¸€ä¸ªç‹¬ç‰¹çš„ã€ä¸å¯é€†çš„æ ‡è¯†ã€‚è¿™ä¸ªæ ‡è¯†å¯ä»¥ç”¨æ¥è¯†åˆ«ç‰©ä½“ï¼Œä½†æ— æ³•é€šè¿‡æ ‡è¯†æ¥è¿˜åŸå‡ºåŸå§‹ç‰©ä½“ã€‚
    
- çœŸå®ç”¨ä¾‹
    
    åœ¨[EIP712](https://github.com/OpenZeppelin/openzeppelin-contracts/blob/9ef69c03d13230aeff24d91cb54c9d24c4de7c8b/contracts/utils/cryptography/EIP712.sol#L88C1-L91C1)ä¸­ï¼Œä½¿ç”¨äº†***keccak256***æ¥è®¡ç®—æŸä¸ªåŸŸç‰¹æœ‰çš„å“ˆå¸Œ
    
    ```solidity
    function _buildDomainSeparator() private view returns (bytes32) {
        return keccak256(abi.encode(_TYPE_HASH, _hashedName, _hashedVersion, block.chainid, address(this)));
    }
    ```
    

### Documentation

***keccak256***æ˜¯ä¸€ä¸ªå…¨å±€å‡½æ•°ï¼Œå¯ä»¥åœ¨å‡½æ•°ä¸­ç›´æ¥ä½¿ç”¨è¯¥å‡½æ•°è¿›è¡Œå“ˆå¸Œè®¡ç®—ã€‚

- è¾“å…¥ï¼šåªæ¥å—`bytes`ç±»å‹çš„è¾“å…¥ã€‚
- è¾“å‡ºï¼š`bytes32`é•¿åº¦çš„å­—èŠ‚ã€‚

```solidity
//è¿™é‡Œæˆ‘ä»¬å°†å­—ç¬¦ä¸²â€HackQuest"è½¬æ¢æˆå­—èŠ‚æ•°ç»„åï¼Œè¿›è¡Œå“ˆå¸Œçš„ç»“æœèµ‹å€¼ç»™äº†reså˜é‡ã€‚
bytes32 res = keccak256(bytes("HackQuest"));
```

### FAQ

- æœ‰å“ªäº›å“ˆå¸Œç®—æ³•ï¼Ÿ
    
    Keccak256 å’Œ SHA3 æ˜¯ç”¨äºå“ˆå¸Œè®¡ç®—çš„ä¸¤ä¸ªç®—æ³•ã€‚
    
    ç„¶è€Œç”±äºåœ¨ä»¥å¤ªåŠçš„å¼€å‘è¿‡ç¨‹ä¸­ï¼ŒSHA3 è¿˜å¤„äºæ ‡å‡†åŒ–é˜¶æ®µï¼Œä»¥å¤ªåŠå¼€å‘å›¢é˜Ÿé€‰æ‹©äº†ä½¿ç”¨Keccak256æ¥ä»£æ›¿å®ƒã€‚æ‰€ä»¥EVMå’Œsolidityä¸­çš„Keccak256å’ŒSHA3éƒ½æ˜¯ä½¿ç”¨Keccak256ç®—æ³•è®¡ç®—çš„å“ˆå¸Œã€‚ä¸ºäº†é¿å…æ¦‚å¿µæ··æ·†ï¼Œåœ¨åˆçº¦ä»£ç ä¸­ç›´æ¥ä½¿ç”¨ Keccak256 æ˜¯æœ€æ¸…æ™°å’Œæ¨èçš„åšæ³•ã€‚
    ![Untitled](./img/2-1.jpeg)
# Example/ç¤ºä¾‹ä»£ç 

```solidity
pragma solidity ^0.8.0;

contract KeccakExample {
		//æ¥æ”¶ä¸€ä¸ªå­—ç¬¦ä¸²å‚æ•° _messageï¼Œå¹¶è¿”å›ä¸€ä¸ª32å­—èŠ‚çš„å“ˆå¸Œå€¼ï¼ˆbytes32ç±»å‹ï¼‰ã€‚
		//åœ¨å‡½æ•°å†…éƒ¨ï¼Œæˆ‘ä»¬ä½¿ç”¨keccak256å‡½æ•°æ¥å¯¹è¾“å…¥å­—ç¬¦ä¸²è¿›è¡Œå“ˆå¸Œè¿ç®—ï¼Œå¹¶å°†ç»“æœè¿”å›ã€‚
    function hash(string memory _message) public pure returns (bytes32) {
        return keccak256(bytes(_message));
    }
}
```