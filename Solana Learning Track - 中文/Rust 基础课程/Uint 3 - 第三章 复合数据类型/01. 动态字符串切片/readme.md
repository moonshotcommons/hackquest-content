# Content/概念

> 前言：在前几节我们介绍过`String`类型的内存结构，有了这个基础，我们就更容易理解本节的切片概念。
> 

**切片（slice）**：是一种引用数据结构，它允许你引用数据的一部分而不需要拷贝整个数据。切片通常用于数组、字符串等集合类型。

**字符串切片（String slice）：**是一种特殊的切片，专门用于处理字符串。字符串切片的类型是 `&str`。它可以通过索引或范围来指定字符串的一部分。字符串切片提供了对字符串的引用，而不引入额外的内存开销。本节我们讨论的是分配在内存中的可动态调节大小的字符串的切片。

- 比喻
    
    我们可以把**整本书**比作字符串，它可以包含大量信息，但你可能只对其中的一部分感兴趣，比如10~20页，那么你就可以只看这些页的内容，这就类似于切片。
    
- 真实用例

### Documentation

我们接下来学习下切片的基本语法，以及对应的内存模型。

```solidity
// 该字符串分配在内存中
let s = String::from("hello world");

// hello 没有引用整个 String字符串 s，而是引用了 s 的一部分内容，通过 [0..5] 的方式来指定。
let hello: &str = &s[0..5];
let world: &str = &s[6..11];
```

创建切片需要通过 `[开始索引..终止索引]`来指定范围，代表的数据范围包含开始位置，但不包含结束位置，即**前闭后开**；同时索引位置从0开始。

![字符串切片.jpg](./img/1-1.jpg)

### FAQ

**Q：如果字符串包含汉字，在获取字符串切片时有什么要注意的？**

A：字符串切片的索引位置是按照**字节**而不是**字符**。由于汉字使用 UTF-8 编码，一个汉字（字符）可能由**一个或多个字节**组成。因此索引必须对应一个完整的汉字的边界，否则获取该汉字会失败。

```rust
let chinese_string = "中国人";

// 获取切片 zhong 会失败，因为一个汉字可能由“一个或多个字节”组成。
// 这里“中”占用3个字节，因此 [0..2]并不对应一个完整的汉字的边界
let zhong = &chinese_string [0..2];

// 正确的写法，1个汉字占3个字节，即汉字“中”的字节范围是0、1、2
let zhong = &chinese_string[0..3];
println!("{}", zhong);
```

# Example/示例代码

接下来我们看下创建切片的几种方式。

```solidity
fn main() {
    let s: String = String::from("hello, hackquest.");

    // 起始从0开始， .. 代表一个或多个索引
    let slice1: &str = &s[0..2];
    // 默认也是从0开始
    let slice2: &str = &s[..2];

    let len: usize = s.len();
    // 包含最后一个字节，由于最后1个字节的索引为(len-1)，所以[4..len]的方式刚好包含了第(len-1)个字节
    let slice3: &str = &s[4..len];
    // 默认到最后1个字节
    let slice4: &str = &s[4..];

    // 获取整个字符串的切片
    let slice5: &str = &s[0..len];
    // 同上
    let slice6: &str = &s[..];
}
```